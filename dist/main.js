var Client;(()=>{"use strict";var e={d:(t,a)=>{for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{handleSubmit:()=>a,resetTrip:()=>c});async function a(e){e.preventDefault();const t=document.getElementById("city").value,a=document.getElementById("startDate").valueAsDate,c=document.getElementById("endDate").valueAsDate,l=function(e){var t=new Date(e).getTime(),a=(new Date).getTime(),n=t-a,o=Math.floor(n/864e5),r=Math.floor(n%864e5/36e5),i=Math.floor(n%36e5/6e4);return` ${o} days-${r}hrs-${i}minutes`}(a),d=function(e,t){const a=e.getTime()-t.getTime();return a/864e5}(a,c),m=await n("http://api.geonames.org/searchJSON?q=","jairajpuri",t),h=await o(" http://api.weatherbit.io/v2.0/forecast/daily?","4ae7bed22a074c1b86986cee2484d2bc",m.geonames[0].lat,m.geonames[0].lng),p=await r("https://pixabay.com/api/?key=","29924781-a1dda297e68a17dd8e7fbf1d3",t);await i("http://localhost:8081/postData",{cityRes:t,startDate:a,endDate:c,weatherData:h,time:l,tripLength:d,image:p}),s(p.hits[0].webformatURL)}"undefined"!=typeof document&&document.getElementById("submit").addEventListener("click",a);const n=async(e,t,a)=>{const n=await fetch(`${e}${a}&maxRows=1&username=${t}`);try{const e=await n.json();return console.log(e),e}catch(e){console.log("error",e)}},o=async(e,t,a,n)=>{const o=await fetch(e+"lat="+a+"&lon="+n+"&key="+t);try{const e=await o.json();return console.log(e),e}catch(e){console.log("error",e)}},r=async(e,t,a)=>{const n=await fetch(e+t+"&q="+a+" city&image_type=photo");try{const e=await n.json();return console.log(e),e}catch(e){console.log("error",e)}};const i=async(e="",t={})=>{console.log(t);const a=await fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});try{const e=await a.json();return console.log(e),e}catch(e){console.log("error",e)}},s=async e=>{const t=await fetch("http://localhost:8081/getData");try{const a=await t.json();document.querySelector(".result").innerHTML=`\n            <div class="info">\n            <h2 class="place">City:<span class="bold">${a.cityRes}</span></h2>\n            <img src="https://www.weatherbit.io/static/img/icons/${a.weatherData.data[0].weather.icon}.png " >\n            <h5 class="time-left"> Your Trip Start in <span class="bold"> ${a.time}</span>. </h5>\n            <p class="trip">Your Trip length is <span class="bold"> ${a.tripLength}</span> days</p>\n            <h6> Temprature of ${a.cityRes} is: <span class="bold">${a.weatherData.data[0].temp}</span>&#176;</h6>\n            </div>\n            <div class="pic"><img src =${e} alt= ${a.cityRes}></div> `;for(let e=0;e<5;e++)document.getElementById("day"+(e+1)+"Min").innerHTML="Min: "+Number(a.weatherData.data[e].low_temp).toFixed(1)+"°";for(let e=0;e<5;e++)document.getElementById("day"+(e+1)+"Max").innerHTML="Max: "+Number(a.weatherData.data[e].high_temp).toFixed(2)+"°";for(let e=0;e<5;e++)document.getElementById("img"+(e+1)).src="https://www.weatherbit.io/static/img/icons/"+a.weatherData.data[0].weather.icon+".png";for(let e=0;e<5;e++)document.getElementById("day"+(e+1)).innerHTML=a.weatherData.data[e].datetime}catch(e){console.log("error",e)}};function c(){document.getElementById("tripForm").reset()}"undefined"!=typeof document&&document.getElementById("remove").addEventListener("click",c),Client=t})();